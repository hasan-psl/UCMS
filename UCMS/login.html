<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>UCMS — Login</title>
    <link rel="stylesheet" href="/assets/css/style.css" />
  </head>
  <body>
    <div class="home-bg-image"></div>
    <div class="home-bg-overlay"></div>
    <header class="nav">
      <div class="container nav-inner">
        <a href="/index.html" class="brand">
          <span class="brand-badge">
            <img src="https://southern.ac.bd/wp-content/uploads/2024/06/logo-1.svg" alt="Southern University Bangladesh" />
          </span>
          <span>Southern University Bangladesh - UCMS</span>
        </a>
        <nav class="nav-links">
          <a class="nav-link" href="/index.html">Home</a>
          <a class="nav-link" href="/clubs.html">Clubs</a>
          <a class="nav-link" href="/events.html">Events</a>
          <a class="nav-link" href="/members.html">Members</a>
          <a class="nav-link" href="/dashboard.html">Dashboard</a>
          <a class="btn" href="/login.html">Login</a>
        </nav>
      </div>
    </header>

    <main class="auth-wrapper">
      <div class="auth-card" id="authCard">
        <h2 class="auth-title">Welcome back</h2>
        <p class="auth-sub">Sign in to continue</p>
        <form class="form" id="loginForm" novalidate>
          <label for="email" class="form-note" style="font-weight:600;color:var(--color-silver);">Email</label>
          <input class="input" type="email" id="email" placeholder="you@example.com" autocomplete="username" aria-label="Email" required autofocus />
          <label for="password" class="form-note" style="font-weight:600;color:var(--color-silver);">Password</label>
          <input class="input" type="password" id="password" placeholder="••••••••" autocomplete="current-password" aria-label="Password" required />
          <button class="btn primary" id="loginBtn" type="submit">
            <span class="btn-text">Sign In</span>
            <span class="spinner" style="display:none"></span>
          </button>
          <div id="error" class="form-note" role="alert" aria-live="polite" style="color:#b42318;display:none;">Invalid username or password</div>
        </form>
      </div>
    </main>

    <script src="/assets/js/app.js"></script>
    <script>
      const form = document.getElementById('loginForm');
      const btn = document.getElementById('loginBtn');
      const spinner = btn.querySelector('.spinner');
      const btnText = btn.querySelector('.btn-text');
      const errorEl = document.getElementById('error');
      const card = document.getElementById('authCard');

      function setLoading(loading) {
        if (loading) {
          btn.classList.add('loading');
          btn.setAttribute('disabled', 'true');
          spinner.style.display = 'grid';
          btnText.style.visibility = 'hidden';
        } else {
          btn.classList.remove('loading');
          btn.removeAttribute('disabled');
          spinner.style.display = 'none';
          btnText.style.visibility = 'visible';
        }
      }

      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        errorEl.style.display = 'none';
        const email = document.getElementById('email');
        const password = document.getElementById('password');
        if (!email.checkValidity() || !password.value) {
          errorEl.textContent = 'Please enter email and password';
          errorEl.style.display = 'block';
          return;
        }
        setLoading(true);
        try {
          await UCMS.login(email.value.trim(), password.value);
          card.classList.add('fade-out');
          UCMS.smoothRedirect('/dashboard.html', 280);
        } catch (err) {
          errorEl.textContent = 'Invalid username or password';
          errorEl.style.display = 'block';
        } finally {
          setLoading(false);
        }
      });
    </script>
  </body>
  </html>


